function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/editor-CC-JWxbU.js","assets/elRules-WV2ZY8TQ.js","assets/multiTag-OYfiRZEC.js","assets/index-DKy0qOiq.js","assets/element-plus-C_WOaAPH.js","assets/element-plus-CIR9-i9o.css","assets/index-Dv2rArH9.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{p as h,I as C,J as B}from"./index-DKy0qOiq.js";import{h as S,g as E,t as k,e as T}from"./multiTag-OYfiRZEC.js";import{d as J,b as p,G as L,e as f,az as W,o as g,I as A,ac as m,j as o,g as a,J as _,ad as M,f as I,L as v,u,a9 as R,K as $,aK as j}from"./element-plus-C_WOaAPH.js";const z={class:"main-box"},K={class:"filter-container flex justify-between"},P={class:"main-body"},H=J({__name:"index",setup(U,{expose:w}){const D=j(()=>B(()=>import("./editor-CC-JWxbU.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),r=p(!1),b=p([]),y=p(null),i=p({editor:{visible:!1,type:""}}),c=async()=>{var e,s;r.value=!0;const n=await S.post({url:"notice/list_notice",mockUrl:"notice/list_notice"});b.value=((s=(e=n.result)==null?void 0:e.sort)==null?void 0:s.call(e,(l,d)=>d.sort-l.sort))||[],r.value=!1},x=(n="add",e)=>{i.value.editor.visible=!0,n==="edit"?(y.value=e,i.value.editor.type="edit"):i.value.editor.type="add"},N=n=>{E.delete(async()=>{r.value=!0;try{const e=JSON.parse(k.getItem("notice/list_notice")),s=e.result,l=s.findIndex(d=>d.id===n.id);l>-1&&(s.splice(l,1),k.setItem("notice/list_notice",JSON.stringify(e)),c(),T.success())}catch(e){T.error(e.message)}finally{setTimeout(()=>{r.value=!1},500)}})};return w({dataList:b,getAnnouncementList:c}),L(()=>{c()}),(n,e)=>{const s=f("el-button"),l=f("el-table-column"),d=f("el-table"),O=W("loading");return g(),A("div",z,[m("div",K,[o(s,{class:"custom-button-3",onClick:c},{default:a(()=>[_("刷新")]),_:1}),o(s,{class:"custom-button-3",onClick:e[0]||(e[0]=t=>x("add"))},{default:a(()=>[_("新增")]),_:1})]),m("div",P,[M((g(),I(d,{ref:"tableRef",stripe:"",data:b.value,class:"custom-table"},{default:a(()=>[o(l,{prop:"id",label:"编号",align:"center",minWidth:"40px"}),o(l,{label:"属性",align:"center",minWidth:"40px"},{default:a(({row:t})=>[m("p",null,v(t.sort===1?"置顶":""),1)]),_:1}),o(l,{prop:"title",label:"标题",align:"center",minWidth:"90px",showOverflowTooltip:!0}),o(l,{prop:"content",label:"内容",align:"center",minWidth:"180px",showOverflowTooltip:!0}),o(l,{prop:"start_time",label:"开始时间",align:"center"},{default:a(({row:t})=>[_(v(u(h)(t.start_time,"{y}/{m}/{d}")),1)]),_:1}),o(l,{prop:"end_time",label:"结束时间",align:"center"},{default:a(({row:t})=>[_(v(u(h)(t.start_time,"{y}/{m}/{d}")),1)]),_:1}),o(l,{prop:"status",label:"状态",align:"center"},{default:a(({row:t})=>[m("p",{class:R(t.status===1?"text-green-1":"text-red-1")},v(t.status===1?"启用":"禁用"),3)]),_:1}),o(l,{label:"操作",align:"center"},{default:a(({row:t})=>[o(s,{class:"custom-icon-button-1",icon:u(C)("uil-edit"),onClick:V=>x("edit",t)},null,8,["icon","onClick"]),o(s,{class:"custom-icon-button-3",icon:u(C)("ms-delete-outline-rounded"),onClick:V=>N(t)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[O,r.value]])]),i.value.editor.visible?(g(),I(u(D),{key:0,visible:i.value.editor.visible,"onUpdate:visible":e[1]||(e[1]=t=>i.value.editor.visible=t),dialogType:i.value.editor.type,temp:y.value,onSubmit:c},null,8,["visible","dialogType","temp"])):$("",!0)])}}});export{H as default};
