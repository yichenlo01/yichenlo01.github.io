import{S as V,l as y}from"./shared_define-X34ULFjF.js";import{b as C,a as T,m as g,h as L,e as h,t as N}from"./multiTag-BnU-R9K-.js";import{b as U,r as E,c as R,_ as B}from"./index-CaJ76v-_.js";import{d as D,b as x,I as M,ac as t,u as O,j as o,g as a,L as q,e as l,ak as A,al as J,o as P,J as d,n as $}from"./element-plus-C_WOaAPH.js";const b=r=>(A("data-v-68c835aa"),r=r(),J(),r),j={class:"login-container"},G=["src"],W={class:"login-box"},z={class:"login-form"},F=b(()=>t("div",{style:{"text-align":"center"}},[t("span",{class:"btm-text"},"用戶 admin 或 user")],-1)),H=b(()=>t("div",{style:{"text-align":"center"}},[t("span",{class:"btm-text"},"密碼 qq123456")],-1)),K={style:{"text-align":"center"}},Q={class:"btm-text"},X=D({__name:"index",setup(r){const k=x(V.CLIENT_VERSION),s=x({username:"",password:""}),c=C(),w=T(),m=U(),p=async i=>{if(s.value.username==="admin"||s.value.username==="user"){g.role=s.value.username,document.cookie="token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";const e=await L.post({url:"user/login",payload:{username:s.value.username,password:s.value.password},mockUrl:"user/login/"+s.value.username});e.code===0&&(c.setToken(e.msg.token),c.setUser(e.msg),E.value=e.msg.role_id,R(m),w.clearAll(!1),i&&c.setIsLoginAndPunch(!0),await $(),m.push("/dashboard"))}else h.error("用戶名或密碼輸入錯誤")},I=()=>{for(const i in g)N.removeItem(i);h.success("清除成功")};return(i,e)=>{const _=l("IconifyIconOffline"),f=l("el-input"),v=l("el-form-item"),u=l("el-button"),S=l("el-form");return P(),M("div",j,[t("div",null,[t("img",{src:O(y),class:"logo"},null,8,G)]),t("div",W,[t("div",z,[o(S,{ref:"formRef",model:s.value,"label-width":"auto","label-position":"top"},{default:a(()=>[o(v,{label:"用戶名",prop:"user"},{default:a(()=>[o(f,{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.username=n),placeholder:"請輸入用户名",class:"user"},{prefix:a(()=>[o(_,{icon:"iconoir-user",width:18})]),_:1},8,["modelValue"])]),_:1}),o(v,{label:"密碼",prop:"pwd"},{default:a(()=>[o(f,{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.password=n),placeholder:"請輸入密碼","show-password":""},{prefix:a(()=>[o(_,{icon:"uil-lock",width:18})]),_:1},8,["modelValue"])]),_:1}),o(u,{class:"btn mt-3.75rem",onClick:e[2]||(e[2]=n=>p(!1))},{default:a(()=>[d("登入")]),_:1}),o(u,{class:"btn mt-1rem",onClick:e[3]||(e[3]=n=>p(!0))},{default:a(()=>[d("上班打卡 & 登入")]),_:1}),o(u,{class:"btn mt-1rem",onClick:I},{default:a(()=>[d("清除儲存空間")]),_:1})]),_:1},8,["model"]),F,H,t("div",K,[t("span",Q,"v"+q(k.value),1)])])])])}}}),oe=B(X,[["__scopeId","data-v-68c835aa"]]);export{oe as default};
