var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},__awaiter=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))(function(s,n){function h(t){try{a(i.next(t))}catch(e){n(e)}}function o(t){try{a(i["throw"](t))}catch(e){n(e)}}function a(t){t.done?s(t.value):new r(function(e){e(t.value)}).then(h,o)}a((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function r(t){return function(e){return i([t,e])}}function i(r){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,n&&(h=n[2&r[0]?"return":r[0]?"throw":"next"])&&!(h=h.call(n,r[1])).done)return h;switch(n=0,h&&(r=[0,h.value]),r[0]){case 0:case 1:h=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(h=a.trys,!(h=h.length>0&&h[h.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!h||r[1]>h[0]&&r[1]<h[3])){a.label=r[1];break}if(6===r[0]&&a.label<h[1]){a.label=h[1],h=r;break}if(h&&a.label<h[2]){a.label=h[2],a.ops.push(r);break}h[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(i){r=[6,i],n=0}finally{s=h=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var s,n,h,o,a={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return o={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},Horses=function(t){function e(){var e=t.call(this)||this;e.horse=[],e.horse_ranked=[],e.horseRank=[,],e.rank=[],e.goal=800,e.finalDD=[],e.rankRandom(10),e.createHorse(),e.rankHorse();for(var r=0;10>r;r++)console.log(r+1+"名="+e.horse[r].horseNum);return e}return __extends(e,t),e.prototype.createHorse=function(){for(var t=35,e=1;10>=e;e++){var r=new Horse("H"+e,this.rank[e-1],e);this.horse.push(r),this.horse[e-1].y=425-(e-1)*t,this.horse[e-1].x=-85+5*e}for(var e=9;e>=0;e--)this.addChild(this.horse[e])},e.prototype.playRun=function(){for(var t=0;t<this.horse.length;t++)this.horse[t].run(),this.horse[t].speed=4*Math.random()+3,this.finalDD[t]=Math.floor(10*Math.random()+40);this.addEventListener(egret.Event.ENTER_FRAME,this.running,this)},e.prototype.changeSpeed=function(){for(var t=0;t<this.horse.length;t++)this.horse[t].speed=Math.floor(8*Math.random()-1),console.log(t+"="+this.horse[t].speed)},e.prototype.changeSpeed_midS=function(){for(var t=0;t<this.horse.length;t++)this.horse[t].x<this.goal+100?(this.horse[t].speed=6*Math.random()-1,console.log(t+"="+this.horse[t].speed)):(console.log("horse["+t+"].x>"+this.goal),this.horse[t].speed=Math.floor(0*Math.random()-1))},e.prototype.changeSpeed_finalS=function(){this.horse[9].x>this.goal?this.horse[9].x-=1:this.horse[9].x+=Math.abs((this.goal-this.horse[9].x)/100);for(var t=8;t>=0;t--)this.horse[t].x-this.finalDD[t]<this.horse[t+1].x?this.horse[t].x+=(this.horse[t+1].width+this.finalDD[t])/100*1.5:this.horse[t].x>=this.horse[t+1].x+this.finalDD[t+1]?this.horse[t].x-=1:this.horse[t].x-=1;for(var t=0;t<this.horse.length-1&&this.horse[t].x-30>this.horse[t+1].x;t++)8==t&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.changeSpeed_finalS,this),this.addEventListener(egret.Event.ENTER_FRAME,this.updateTrdX,this),this.dispatchEventWith("showGoal"))},e.prototype.finishSpeed=function(){for(var t=0;t<this.horse.length;t++)this.horse[t].x+=10;if(this.horse[9].x>1500){this.removeEventListener(egret.Event.ENTER_FRAME,this.finishSpeed,this);for(var t=0;t<this.horse.length;t++)this.horse[t].idle(),this.removeChild(this.horse[t]);this.dispatchEventWith("gameEnd"),console.log("遊戲結束")}},e.prototype.running=function(t){for(var e=0;e<this.horse.length;e++)this.horse[e].x+=this.horse[e].speed},e.prototype.rankRandom=function(t){for(var e=0;t>e;e++){var r=0;do{var i=!1;r=Math.floor(10*Math.random()+1),-1!=this.rank.indexOf(r)&&(i=!0)}while(i);this.rank[e]=r}},e.prototype.rankHorse=function(){for(var t=0;t<this.horse.length;t++)for(var e=0;e<this.horse.length;e++)if(this.horse[e].rank==t+1){this.horse_ranked[t]=this.horse[e];break}this.horse=this.horse_ranked},e.prototype.updateTrdX=function(){this.trdX=this.horse[2].x},e}(egret.DisplayObjectContainer);__reflect(Horses.prototype,"Horses");var BgMap=function(t){function e(){var e=t.call(this)||this;return e.lapsCount=0,e.speed=30,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var t=RES.getRes("BG_png");this.textureWidth=t.textureWidth,this.goal=new Goal,this.goal.x=this.textureWidth,this.goal.x=1500,this.rowCount=Math.ceil(this.stageW/this.textureWidth)+2,this.bmpArr=[];for(var e=2;e>=0;e--){var r=new egret.Bitmap;r.texture=RES.getRes("BG_png"),r.x=this.textureWidth*e,this.bmpArr.push(r),this.addChild(r)}},e.prototype.start=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},e.prototype.enterFrameHandler=function(t){for(var e=0;e<this.rowCount;e++){var r=this.bmpArr[e];r.x-=this.speed,r.x<-this.textureWidth&&(r.x=this.bmpArr[0].x+1*this.textureWidth,this.bmpArr.pop(),this.bmpArr.unshift(r),this.lapsCount+=1,this.dispatchEventWith("lapPlus"),console.log("lapsCount="+this.lapsCount))}},e.prototype.showGoal=function(){this.goal.x-=this.speed,this.goal.x<=1100&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.showGoal,this),this.pause(),this.goal.x=1100)},e.prototype.pause=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.dispatchEventWith("bgStop")},e.prototype.draw=function(){this.g=new egret.Shape,this.g.graphics.beginFill(0,.8),this.g.graphics.drawRect(0,0,400,200),this.g.graphics.endFill(),this.addChild(this.g)},e}(egret.DisplayObjectContainer);__reflect(BgMap.prototype,"BgMap");var GameContainer=function(t){function e(){var e=t.call(this)||this;return e.speed=20,e.horseRank=[,],e.horseNum=[],e.txInput=[],e.rankText=[],e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.lapsCount=0,this.btnStart=new egret.Bitmap,this.btnStart.texture=RES.getRes("Start_png"),this.btnStart.scaleX=.2,this.btnStart.scaleY=.2,this.btnStart.x=1e3,this.btnStart.y=590,this.btnStart.touchEnabled=!0,this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gameStart,this),this.rankPanel=new RankPanel,this.addChild(this.rankPanel),this.countDownPanel=new CountDownPanel,this.rewardPanel=new RewardPanel,this.gateTop=new egret.Bitmap,this.gateBot=new egret.Bitmap,this.gateBot.texture=RES.getRes("start_bottom_standby_png"),this.gateTop.texture=RES.getRes("start_upper_png"),this.gateBot.y=50,this.gateTop.y=50,this.goal=new Goal,this.horses=new Horses,this.bg=new BgMap,this.bg.y=100,this.addChild(this.bg),this.addChild(this.goal),this.addChild(this.gateBot),this.addChild(this.horses),this.addChild(this.gateTop),this.eventListen(),this.countDownPanel.x=(this.stage.stageWidth-this.countDownPanel.width)/2,this.addChild(this.countDownPanel),this.rankSet(),this.rankSetEvent(),this.timerSet(),this.timerSetEvent(),this.addChild(this.btnStart)},e.prototype.changeSpeed=function(){this.lapsCount+=1,this.lapsCount<4?this.horses.changeSpeed():this.lapsCount>=4&&this.lapsCount<8?this.horses.changeSpeed_midS():this.lapsCount>=8&&(this.horses.removeEventListener(egret.Event.ENTER_FRAME,this.horses.running,this.horses),this.once(egret.Event.ENTER_FRAME,this.removeInputText,this),this.horses.addEventListener(egret.Event.ENTER_FRAME,this.horses.changeSpeed_finalS,this.horses),this.bg.removeEventListener("lapPlus",this.changeSpeed,this))},e.prototype.showGoal=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.showGoal,this),this.goal.x-=this.speed,this.goal.x<=1100&&(this.removeEventListener(egret.Event.ENTER_FRAME,this.showGoal,this),this.horses.addEventListener(egret.Event.ENTER_FRAME,this.horses.finishSpeed,this.horses),this.bg.pause(),this.goal.x=1100)},e.prototype.flash=function(){this.goal.x<=this.horses.trdX&&(console.log("亮一下"),this.removeEventListener(egret.Event.ENTER_FRAME,this.flash,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.getRank,this),this.white(),this.horses.removeEventListener(egret.Event.ENTER_FRAME,this.horses.updateTrdX,this.horses))},e.prototype.gameFinish=function(){this.bg.pause()},e.prototype.reward=function(){console.log("結算"),this.removeEventListener("gameEnd",this.reward,this),this.rewardPanel.x=1500,this.addChild(this.rewardPanel),egret.Tween.get(this.rewardPanel,{loop:!1}).to({alpha:0},0).to({alpha:1},2e3);var t=egret.Tween.get(this.rewardPanel);t.to({x:0},2e3,egret.Ease.quartIn),this.addEventListener(egret.Event.ENTER_FRAME,this.rewardMove,this)},e.prototype.rewardMove=function(){if(this.rewardPanel.x<=0){this.removeEventListener(egret.Event.ENTER_FRAME,this.rewardMove,this),this.rewardPanel.x=0,this.rewardPanel.showRank();var t=this.horses.horse[0],e=this.horses.horse[1],r=this.horses.horse[2];this.rewardPanel.showHorse(t,e,r),egret.setTimeout(this.gameReset,this,5e3)}},e.prototype.gameReset=function(){this.removeChildren(),this.onAddToStage()},e.prototype.removeReward=function(){egret.Tween.get(this.rewardPanel,{loop:!1}).to({alpha:1},0).to({alpha:0},2e3);var t=egret.Tween.get(this.rewardPanel);t.to({x:-2e3},2e3,egret.Ease.quartIn)},e.prototype.white=function(){var t=new egret.Shape;t.graphics.beginFill(16579836,.9),t.graphics.drawRect(this.bg.x,this.bg.y,this.bg.width,this.bg.height),t.graphics.endFill(),this.addChild(t),egret.Tween.get(t,{loop:!1}).to({alpha:1},300).to({alpha:0},350)},e.prototype.gateDisappear=function(){this.gateBot.texture=RES.getRes("start_bottom_open_png"),egret.Tween.get(this.gateBot).to({alpha:0},1e3),egret.Tween.get(this.gateTop).to({alpha:0},1e3),this.addEventListener(egret.Event.ENTER_FRAME,this.flash,this),this.addEventListener(egret.Event.ENTER_FRAME,this.getRank,this)},e.prototype.gameStart=function(){this.removeChild(this.btnStart),this.removeChild(this.timerText),this.removeChild(this.timerInput),this.countDownPanel.createTimer(),this.countDownPanel._timer.start()},e.prototype.eventListen=function(){this.bg.addEventListener("lapPlus",this.changeSpeed,this),this.horses.addEventListener("showGoal",this.showGoal,this),this.addEventListener(egret.Event.ENTER_FRAME,this.flash,this),this.countDownPanel.addEventListener("start",this.horses.playRun,this.horses),this.countDownPanel.addEventListener("start",this.bg.start,this.bg),this.countDownPanel.addEventListener("start",this.gateDisappear,this),this.horses.addEventListener("gameEnd",this.reward,this)},e.prototype.getRank=function(){for(var t=[],e=0;10>e;e++)this.horseRank[e]=[this.horses.horse[e].horseNum,this.horses.horse[e].x];this.horseRank.sort(this.sort).join;for(var e=0;10>e;e++)t[e]=this.horseRank[e][0];this.rankPanel.changeRank(t)},e.prototype.sort=function(t,e){return e[1]-t[1]},e.prototype.timerSet=function(){this.timerText=new egret.TextField,this.timerText.width=150,this.timerText.height=35,this.timerText.textColor=16777215,this.timerText.x=1200,this.timerText.y=590,this.timerText.text="预备时间",this.timerInput=new egret.TextField,this.timerInput.type=egret.TextFieldType.INPUT,this.timerInput.width=100,this.timerInput.height=35,this.timerInput.textColor=0,this.timerInput.x=1200,this.timerInput.y=630,this.timerInput.text=""+this.countDownPanel.getTimers(),this.layTxBg(this.timerInput),this.addChild(this.timerText),this.addChild(this.timerInput)},e.prototype.timerSetEvent=function(){this.timerInput.addEventListener(egret.Event.CHANGE,function(t){this.countDownPanel.setTimers(t.target.text)},this)},e.prototype.rankSet=function(){for(var t=0;10>t;t++)this.rankText[t]=new egret.TextField,this.rankText[t].width=45,this.rankText[t].height=35,this.rankText[t].x=20+70*t,this.rankText[t].y=590,this.rankText[t].textColor=16777215,this.rankText[t].text="r"+(t+1),this.txInput[t]=new egret.TextField,this.txInput[t].type=egret.TextFieldType.INPUT,this.txInput[t].width=35,this.txInput[t].height=35,this.txInput[t].x=20+70*t,this.txInput[t].y=630,this.txInput[t].textColor=0,this.txInput[t].maxChars=2,this.txInput[t].text=""+this.horses.horse[t].horseNum,this.layTxBg(this.txInput[t]),this.addChild(this.txInput[t]),this.addChild(this.rankText[t])},e.prototype.layTxBg=function(t){var e=new egret.Shape;e.graphics.beginFill(16777215),e.graphics.drawRect(t.x,t.y,t.width,t.height),e.graphics.endFill(),this.addChild(e)},e.prototype.removeInputText=function(){for(var t=0;10>t;t++)this.removeChild(this.txInput[t]);console.log("Fsdfdsf")},e.prototype.rankSetEvent=function(){this.rankSetAdd(0),this.rankSetAdd(1),this.rankSetAdd(2),this.rankSetAdd(3),this.rankSetAdd(4),this.rankSetAdd(5),this.rankSetAdd(6),this.rankSetAdd(7),this.rankSetAdd(8),this.rankSetAdd(9)},e.prototype.rankSetAdd=function(t){this.txInput[t].addEventListener(egret.Event.CHANGE,function(e){var r;if(r=this.horses.horse[t],e.target.text>0&&e.target.text<=10)for(var i=0;10>i;i++)if(this.horses.horse[i].horseNum==e.target.text){this.horses.horse[t]=this.horses.horse[i],this.horses.horse[i]=r,this.txInput[i].text=r.horseNum;break}},this)},e}(egret.DisplayObjectContainer);__reflect(GameContainer.prototype,"GameContainer");var GameUtil=function(){function t(){}return t.hitTest=function(t,e){var r=t.getBounds(),i=e.getBounds();return r.x=t.x,r.y=t.y,i.x=e.x,i.y=e.y,r.intersects(i)},t}();__reflect(GameUtil.prototype,"GameUtil");var Goal=function(t){function e(){var e=t.call(this)||this;return e.goal=new egret.Bitmap,e.goal.texture=RES.getRes("goal_png"),e.goal_line=new egret.Bitmap,e.goal_line.texture=RES.getRes("goal_line_png"),e.goal_line.x=114,e.goal_line.y=136,e.addChild(e.goal),e.addChild(e.goal_line),e.x=1500,e.y=64,e}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(Goal.prototype,"Goal");var Horse=function(t){function e(e,r,i){var s=t.call(this)||this;s.data=RES.getRes("horse_json"),s.txtr=RES.getRes("horse_png"),s.mcFactory=new egret.MovieClipDataFactory(s.data,s.txtr),s.horse=new egret.MovieClip(s.mcFactory.generateMovieClipData(e)),s.rank=r,s.horseNum=i,s.addChild(s.horse);var n=Math.floor(9*Math.random()+1);return egret.setTimeout(s.idle,s,100*n),s}return __extends(e,t),e.prototype.idle=function(){Math.floor(8*Math.random());this.horse.gotoAndPlay("idle",-1)},e.prototype.run=function(){this.horse.gotoAndPlay("run",-1)},e}(egret.DisplayObjectContainer);__reflect(Horse.prototype,"Horse");var CountDownPanel=function(t){function e(){var e=t.call(this)||this;return e._num=5,e._timers=5,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(){this.draw(),this.x=(this.stage.stageWidth-this.panel.width)/2,this.y=(this.stage.stageHeight-this.panel.height)/2},e.prototype.draw=function(){this.panel=new egret.Bitmap,this.panel.texture=RES.getRes("standby_count_plate_png"),this.addChild(this.panel),this.txt=new egret.TextField,this.txt.width=400,this.txt.height=200,this.txt.textAlign=egret.HorizontalAlign.CENTER,this.txt.textColor=16711680,this.txt.size=64,this.txt.bold=!0,this.txt.text="预备中",this.addChild(this.txt)},e.prototype.createTimer=function(){this._timer=new egret.Timer(1e3,this._num),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerCom,this)},e.prototype.onTimer=function(){this._timers-=1,this.txt.text=""+this._timers},e.prototype.onTimerCom=function(){this.removeChild(this.panel),this.removeChild(this.txt),this.dispatchEventWith("start")},e.prototype.getTimers=function(){return this._timers},e.prototype.setTimers=function(t){this._num=t,this._timers=t},e}(egret.DisplayObjectContainer);__reflect(CountDownPanel.prototype,"CountDownPanel");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(r){switch(r.label){case 0:return[4,this.loadResource()];case 1:return r.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=r.sent(),this.startAnimation(t),[4,platform.login()];case 3:return r.sent(),[4,platform.getUserInfo()];case 4:return e=r.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return r.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return r.sent(),this.stage.removeChild(t),[3,4];case 3:return e=r.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.gameContainer=new GameContainer,this.addChild(this.gameContainer)},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,r=RES.getRes(t);return e.texture=r,e},e.prototype.startAnimation=function(t){var e=this,r=new egret.HtmlTextParser,i=t.map(function(t){return r.parse(t)}),s=this.textfield,n=-1,h=function(){n++,n>=i.length&&(n=0);var t=i[n];s.textFlow=t;var r=egret.Tween.get(s);r.to({alpha:1},200),r.wait(2e3),r.to({alpha:0},200),r.call(h,e)};h()},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Rank=function(t){function e(e){var r=t.call(this)||this;return r.createrankImg(e),r}return __extends(e,t),e.prototype.createrankImg=function(t){switch(this.rankImg=new egret.Bitmap,t){case 1:this.rankImg.texture=RES.getRes("NO_01_png"),this.num=t;break;case 2:this.rankImg.texture=RES.getRes("NO_02_png"),this.num=t;break;case 3:this.rankImg.texture=RES.getRes("NO_03_png"),this.num=t;break;case 4:this.rankImg.texture=RES.getRes("NO_04_png"),this.num=t;break;case 5:this.rankImg.texture=RES.getRes("NO_05_png"),this.num=t;break;case 6:this.rankImg.texture=RES.getRes("NO_06_png"),this.num=t;break;case 7:this.rankImg.texture=RES.getRes("NO_07_png"),this.num=t;break;case 8:this.rankImg.texture=RES.getRes("NO_08_png"),this.num=t;break;case 9:this.rankImg.texture=RES.getRes("NO_09_png"),this.num=t;break;case 10:this.rankImg.texture=RES.getRes("NO_10_png"),this.num=t}this.addChild(this.rankImg)},e.prototype.charngeRankImg=function(t){switch(t){case 1:this.rankImg.texture=RES.getRes("NO_01_png"),this.num=t;break;case 2:this.rankImg.texture=RES.getRes("NO_02_png"),this.num=t;break;case 3:this.rankImg.texture=RES.getRes("NO_03_png"),this.num=t;break;case 4:this.rankImg.texture=RES.getRes("NO_04_png"),this.num=t;break;case 5:this.rankImg.texture=RES.getRes("NO_05_png"),this.num=t;break;case 6:this.rankImg.texture=RES.getRes("NO_06_png"),this.num=t;break;case 7:this.rankImg.texture=RES.getRes("NO_07_png"),this.num=t;break;case 8:this.rankImg.texture=RES.getRes("NO_08_png"),this.num=t;break;case 9:this.rankImg.texture=RES.getRes("NO_09_png"),this.num=t;break;case 10:this.rankImg.texture=RES.getRes("NO_10_png"),this.num=t}},e}(egret.DisplayObjectContainer);__reflect(Rank.prototype,"Rank");var RankPanel=function(t){function e(){var e=t.call(this)||this;return e.num=[10],e.img=[],e.rank=[],e.rankTemp=[],e.createRankPanel(),e.y=25,e}return __extends(e,t),e.prototype.onAddToStage=function(){},e.prototype.createRankPanel=function(){for(var t=0;10>t;t++)this.rank[t]=new Rank(10-t),this.rank[t].x=1e3-50*t,this.addChild(this.rank[t])},e.prototype.changeRank=function(t){for(var e=0;10>e;e++)this.rankTemp[e]=new Rank(t[e]),this.rank[e]!=this.rankTemp[e]&&this.rank[e].charngeRankImg(t[e])},e}(egret.DisplayObjectContainer);__reflect(RankPanel.prototype,"RankPanel");var RewardPanel=function(t){function e(){var e=t.call(this)||this;return e._num=5,e._timers=5,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(){this.panel=new egret.Bitmap,this.panel.texture=RES.getRes("reward_BG_png"),this.panel.width=this.stage.stageWidth+200,this.panel.height=this.stage.stageHeight,this.addChild(this.panel)},e.prototype.showRank=function(){this.rank1=new egret.Bitmap,this.rank1.texture=RES.getRes("reward_1st_png"),this.rank2=new egret.Bitmap,this.rank2.texture=RES.getRes("reward_2nd_png"),this.rank3=new egret.Bitmap,this.rank3.texture=RES.getRes("reward_3rd_png"),this.rank1.x=(this.stage.stageWidth-this.rank1.width)/2,this.rank1.y=120,this.rank2.x=this.rank1.x-400,this.rank2.y=170,this.rank3.x=this.rank1.x+400,this.rank3.y=220,this.addChild(this.rank1),egret.Tween.get(this.rank1,{loop:!1}).to({alpha:0},0).to({alpha:1},1e3),this.addChild(this.rank2),egret.Tween.get(this.rank2,{loop:!1}).to({alpha:0},0).to({alpha:1},1200),this.addChild(this.rank3),egret.Tween.get(this.rank3,{loop:!1}).to({alpha:0},0).to({alpha:1},1400)},e.prototype.showHorse=function(t,e,r){var i=t,s=e,n=r;i.scaleX=2,i.scaleY=2,s.scaleX=1.8,s.scaleY=1.8,n.scaleX=1.5,n.scaleY=1.5,i.x=490,i.y=350,s.x=110,s.y=400,n.x=950,n.y=500,this.addChild(i),egret.Tween.get(i,{loop:!1}).to({alpha:0},0).to({alpha:1},1500),this.addChild(s),egret.Tween.get(s,{loop:!1}).to({alpha:0},0).to({alpha:1},1700),this.addChild(n),egret.Tween.get(n,{loop:!1}).to({alpha:0},0).to({alpha:1},1900)},e.prototype.createTimer=function(){this._timer=new egret.Timer(1e3,this._num),this._timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this._timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerCom,this)},e.prototype.onTimer=function(){this._timers-=1},e.prototype.onTimerCom=function(){this.removeChild(this.panel),this.dispatchEventWith("start")},e}(egret.DisplayObjectContainer);__reflect(RewardPanel.prototype,"RewardPanel");